import"../../main-ynsbc1hx.js";

// init/lib/prometheus.ts
async function queryInstant(params) {
  let baseUrl = params.url || "http://localhost:9090", timeout = params.timeout || 30000, url = new URL("/api/v1/query", baseUrl);
  if (url.searchParams.set("query", params.query), params.time !== void 0)
    url.searchParams.set("time", params.time.toString());
  if (params.queryTimeout)
    url.searchParams.set("timeout", params.queryTimeout);
  let response = await fetch(url.toString(), {
    signal: AbortSignal.timeout(timeout)
  }), data = await response.json();
  if (!response.ok)
    throw Error(`Prometheus query failed: ${data.error || response.statusText}`);
  return data;
}
async function queryRange(params) {
  let baseUrl = params.url || "http://localhost:9090", timeout = params.timeout || 30000, url = new URL("/api/v1/query_range", baseUrl);
  if (url.searchParams.set("query", params.query), url.searchParams.set("start", params.start.toString()), url.searchParams.set("end", params.end.toString()), url.searchParams.set("step", params.step), params.queryTimeout)
    url.searchParams.set("timeout", params.queryTimeout);
  let response = await fetch(url.toString(), {
    signal: AbortSignal.timeout(timeout)
  }), data = await response.json();
  if (!response.ok)
    throw Error(`Prometheus range query failed: ${data.error || response.statusText}`);
  return data;
}
export {
  queryRange,
  queryInstant
};

export { queryRange };

//# debugId=503BBD8B33697DF764756E2164756E21
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vaW5pdC9saWIvcHJvbWV0aGV1cy50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsKICAgICJleHBvcnQgdHlwZSBQcm9tZXRoZXVzVmFsdWVUeXBlID0gJ21hdHJpeCcgfCAndmVjdG9yJyB8ICdzY2FsYXInIHwgJ3N0cmluZydcblxuZXhwb3J0IGludGVyZmFjZSBQcm9tZXRoZXVzTWV0cmljIHtcblx0W2xhYmVsOiBzdHJpbmddOiBzdHJpbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQcm9tZXRoZXVzSW5zdGFudFZhbHVlIHtcblx0bWV0cmljOiBQcm9tZXRoZXVzTWV0cmljXG5cdHZhbHVlOiBbbnVtYmVyLCBzdHJpbmddXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvbWV0aGV1c1JhbmdlVmFsdWUge1xuXHRtZXRyaWM6IFByb21ldGhldXNNZXRyaWNcblx0dmFsdWVzOiBBcnJheTxbbnVtYmVyLCBzdHJpbmddPlxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFByb21ldGhldXNTY2FsYXJWYWx1ZSB7XG5cdHZhbHVlOiBbbnVtYmVyLCBzdHJpbmddXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvbWV0aGV1c1Jlc3BvbnNlPFQgPSBQcm9tZXRoZXVzSW5zdGFudFZhbHVlIHwgUHJvbWV0aGV1c1JhbmdlVmFsdWU+IHtcblx0c3RhdHVzOiAnc3VjY2VzcycgfCAnZXJyb3InXG5cdGRhdGE/OiB7XG5cdFx0cmVzdWx0VHlwZTogUHJvbWV0aGV1c1ZhbHVlVHlwZVxuXHRcdHJlc3VsdDogVFtdXG5cdH1cblx0ZXJyb3JUeXBlPzogc3RyaW5nXG5cdGVycm9yPzogc3RyaW5nXG5cdHdhcm5pbmdzPzogc3RyaW5nW11cbn1cblxuZXhwb3J0IGludGVyZmFjZSBQcm9tZXRoZXVzUXVlcnlPcHRpb25zIHtcblx0dXJsPzogc3RyaW5nXG5cdHRpbWVvdXQ/OiBudW1iZXJcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQcm9tZXRoZXVzSW5zdGFudFF1ZXJ5UGFyYW1zIGV4dGVuZHMgUHJvbWV0aGV1c1F1ZXJ5T3B0aW9ucyB7XG5cdHF1ZXJ5OiBzdHJpbmdcblx0dGltZT86IHN0cmluZyB8IG51bWJlclxuXHRxdWVyeVRpbWVvdXQ/OiBzdHJpbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQcm9tZXRoZXVzUmFuZ2VRdWVyeVBhcmFtcyBleHRlbmRzIFByb21ldGhldXNRdWVyeU9wdGlvbnMge1xuXHRxdWVyeTogc3RyaW5nXG5cdHN0YXJ0OiBzdHJpbmcgfCBudW1iZXJcblx0ZW5kOiBzdHJpbmcgfCBudW1iZXJcblx0c3RlcDogc3RyaW5nXG5cdHF1ZXJ5VGltZW91dD86IHN0cmluZ1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIGluc3RhbnQgUHJvbVFMIHF1ZXJ5IGF0IGEgc3BlY2lmaWMgcG9pbnQgaW4gdGltZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcXVlcnlJbnN0YW50KFxuXHRwYXJhbXM6IFByb21ldGhldXNJbnN0YW50UXVlcnlQYXJhbXNcbik6IFByb21pc2U8UHJvbWV0aGV1c1Jlc3BvbnNlPFByb21ldGhldXNJbnN0YW50VmFsdWU+PiB7XG5cdGxldCBiYXNlVXJsID0gcGFyYW1zLnVybCB8fCAnaHR0cDovL2xvY2FsaG9zdDo5MDkwJ1xuXHRsZXQgdGltZW91dCA9IHBhcmFtcy50aW1lb3V0IHx8IDMwMDAwXG5cblx0bGV0IHVybCA9IG5ldyBVUkwoJy9hcGkvdjEvcXVlcnknLCBiYXNlVXJsKVxuXHR1cmwuc2VhcmNoUGFyYW1zLnNldCgncXVlcnknLCBwYXJhbXMucXVlcnkpXG5cblx0aWYgKHBhcmFtcy50aW1lICE9PSB1bmRlZmluZWQpIHtcblx0XHR1cmwuc2VhcmNoUGFyYW1zLnNldCgndGltZScsIHBhcmFtcy50aW1lLnRvU3RyaW5nKCkpXG5cdH1cblxuXHRpZiAocGFyYW1zLnF1ZXJ5VGltZW91dCkge1xuXHRcdHVybC5zZWFyY2hQYXJhbXMuc2V0KCd0aW1lb3V0JywgcGFyYW1zLnF1ZXJ5VGltZW91dClcblx0fVxuXG5cdGxldCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybC50b1N0cmluZygpLCB7XG5cdFx0c2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KHRpbWVvdXQpLFxuXHR9KVxuXG5cdGxldCBkYXRhID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSkgYXMgUHJvbWV0aGV1c1Jlc3BvbnNlPFByb21ldGhldXNJbnN0YW50VmFsdWU+XG5cblx0aWYgKCFyZXNwb25zZS5vaykge1xuXHRcdHRocm93IG5ldyBFcnJvcihgUHJvbWV0aGV1cyBxdWVyeSBmYWlsZWQ6ICR7ZGF0YS5lcnJvciB8fCByZXNwb25zZS5zdGF0dXNUZXh0fWApXG5cdH1cblxuXHRyZXR1cm4gZGF0YVxufVxuXG4vKipcbiAqIEV4ZWN1dGVzIFByb21RTCByYW5nZSBxdWVyeSBvdmVyIGEgdGltZSBwZXJpb2RcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHF1ZXJ5UmFuZ2UoXG5cdHBhcmFtczogUHJvbWV0aGV1c1JhbmdlUXVlcnlQYXJhbXNcbik6IFByb21pc2U8UHJvbWV0aGV1c1Jlc3BvbnNlPFByb21ldGhldXNSYW5nZVZhbHVlPj4ge1xuXHRsZXQgYmFzZVVybCA9IHBhcmFtcy51cmwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6OTA5MCdcblx0bGV0IHRpbWVvdXQgPSBwYXJhbXMudGltZW91dCB8fCAzMDAwMFxuXG5cdGxldCB1cmwgPSBuZXcgVVJMKCcvYXBpL3YxL3F1ZXJ5X3JhbmdlJywgYmFzZVVybClcblx0dXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3F1ZXJ5JywgcGFyYW1zLnF1ZXJ5KVxuXHR1cmwuc2VhcmNoUGFyYW1zLnNldCgnc3RhcnQnLCBwYXJhbXMuc3RhcnQudG9TdHJpbmcoKSlcblx0dXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2VuZCcsIHBhcmFtcy5lbmQudG9TdHJpbmcoKSlcblx0dXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3N0ZXAnLCBwYXJhbXMuc3RlcClcblxuXHRpZiAocGFyYW1zLnF1ZXJ5VGltZW91dCkge1xuXHRcdHVybC5zZWFyY2hQYXJhbXMuc2V0KCd0aW1lb3V0JywgcGFyYW1zLnF1ZXJ5VGltZW91dClcblx0fVxuXG5cdGxldCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybC50b1N0cmluZygpLCB7XG5cdFx0c2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KHRpbWVvdXQpLFxuXHR9KVxuXG5cdGxldCBkYXRhID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSkgYXMgUHJvbWV0aGV1c1Jlc3BvbnNlPFByb21ldGhldXNSYW5nZVZhbHVlPlxuXG5cdGlmICghcmVzcG9uc2Uub2spIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoYFByb21ldGhldXMgcmFuZ2UgcXVlcnkgZmFpbGVkOiAke2RhdGEuZXJyb3IgfHwgcmVzcG9uc2Uuc3RhdHVzVGV4dH1gKVxuXHR9XG5cblx0cmV0dXJuIGRhdGFcbn1cbiIKICBdLAogICJtYXBwaW5ncyI6ICI7OztBQXFEQSxlQUFzQixZQUFZLENBQ2pDLFFBQ3NEO0FBQUEsRUFDdEQsSUFBSSxVQUFVLE9BQU8sT0FBTyx5QkFDeEIsVUFBVSxPQUFPLFdBQVcsT0FFNUIsTUFBTSxJQUFJLElBQUksaUJBQWlCLE9BQU87QUFBQSxFQUcxQyxJQUZBLElBQUksYUFBYSxJQUFJLFNBQVMsT0FBTyxLQUFLLEdBRXRDLE9BQU8sU0FBUztBQUFBLElBQ25CLElBQUksYUFBYSxJQUFJLFFBQVEsT0FBTyxLQUFLLFNBQVMsQ0FBQztBQUFBLEVBR3BELElBQUksT0FBTztBQUFBLElBQ1YsSUFBSSxhQUFhLElBQUksV0FBVyxPQUFPLFlBQVk7QUFBQSxFQUdwRCxJQUFJLFdBQVcsTUFBTSxNQUFNLElBQUksU0FBUyxHQUFHO0FBQUEsSUFDMUMsUUFBUSxZQUFZLFFBQVEsT0FBTztBQUFBLEVBQ3BDLENBQUMsR0FFRyxPQUFRLE1BQU0sU0FBUyxLQUFLO0FBQUEsRUFFaEMsSUFBSSxDQUFDLFNBQVM7QUFBQSxJQUNiLE1BQVUsTUFBTSw0QkFBNEIsS0FBSyxTQUFTLFNBQVMsWUFBWTtBQUFBLEVBR2hGLE9BQU87QUFBQTtBQU1SLGVBQXNCLFVBQVUsQ0FDL0IsUUFDb0Q7QUFBQSxFQUNwRCxJQUFJLFVBQVUsT0FBTyxPQUFPLHlCQUN4QixVQUFVLE9BQU8sV0FBVyxPQUU1QixNQUFNLElBQUksSUFBSSx1QkFBdUIsT0FBTztBQUFBLEVBTWhELElBTEEsSUFBSSxhQUFhLElBQUksU0FBUyxPQUFPLEtBQUssR0FDMUMsSUFBSSxhQUFhLElBQUksU0FBUyxPQUFPLE1BQU0sU0FBUyxDQUFDLEdBQ3JELElBQUksYUFBYSxJQUFJLE9BQU8sT0FBTyxJQUFJLFNBQVMsQ0FBQyxHQUNqRCxJQUFJLGFBQWEsSUFBSSxRQUFRLE9BQU8sSUFBSSxHQUVwQyxPQUFPO0FBQUEsSUFDVixJQUFJLGFBQWEsSUFBSSxXQUFXLE9BQU8sWUFBWTtBQUFBLEVBR3BELElBQUksV0FBVyxNQUFNLE1BQU0sSUFBSSxTQUFTLEdBQUc7QUFBQSxJQUMxQyxRQUFRLFlBQVksUUFBUSxPQUFPO0FBQUEsRUFDcEMsQ0FBQyxHQUVHLE9BQVEsTUFBTSxTQUFTLEtBQUs7QUFBQSxFQUVoQyxJQUFJLENBQUMsU0FBUztBQUFBLElBQ2IsTUFBVSxNQUFNLGtDQUFrQyxLQUFLLFNBQVMsU0FBUyxZQUFZO0FBQUEsRUFHdEYsT0FBTztBQUFBOyIsCiAgImRlYnVnSWQiOiAiNTAzQkJEOEIzMzY5N0RGNzY0NzU2RTIxNjQ3NTZFMjEiLAogICJuYW1lcyI6IFtdCn0=
